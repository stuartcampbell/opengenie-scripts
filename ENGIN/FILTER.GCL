# THIS IS A COMMENT
PROCEDURE LOOK
PARAMETERS RUN=INTEGER SPEC=INTEGER
RESULT W
LOCAL TEMP

SET/INST "PRL"
SET/EXT  "RAW"
SET/DISK  "PEARL$DKA0:"
SET/DIR  "[PRLMGR.DATA]"
        
 ASSIGN RUN
 W = S(SPEC)

 LOOP I FROM 2 TO W.NTC
  IF (W.Y[I] < 0.0) AND (I > 1)
   TEMP = ((W.Y[(I+1)]-W.Y[(I-1)])/2.0)
   W.Y[I] = W.Y[(I-1)] + TEMP
   PRINTEN " TIME CHANNEL "I" IS -VE"
  ENDIF

  IF (ABS(W.Y[I]-W.Y[(I-1)]) > (MAX(W.Y)/10.0)) AND (I > 1)
   TEMP = ((W.Y[(I+1)]-W.Y[(I-1)])/2.0)
   W.Y[I] = W.Y[(I-1)] + TEMP
   PRINTEN " TIME CHANNEL "I" IS DODGY"
  ENDIF

 ENDLOOP

ENDPROCEDURE

